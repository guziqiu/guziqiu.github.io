<!DOCTYPE html>


<html lang="zh-CN">


<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="关键字" />
   
  <meta name="description" content="说明" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    习题答疑 |  古子秋
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

</head>

</html>

<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-07.习题答疑"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  习题答疑
</h1>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/12/29/07.%E4%B9%A0%E9%A2%98%E7%AD%94%E7%96%91/" class="article-date">
  <time datetime="2020-12-29T00:08:15.000Z" itemprop="datePublished">2020-12-29</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E4%B9%A0%E9%A2%98%E7%AD%94%E7%96%91/">习题答疑</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">7.2k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">38 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="9-课程答疑-一"><a href="#9-课程答疑-一" class="headerlink" title="9.课程答疑(一)"></a>9.课程答疑(一)</h1><h2 id="1-逆波兰式"><a href="#1-逆波兰式" class="headerlink" title="1.逆波兰式"></a>1.逆波兰式</h2><p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-01-31%20%E4%B8%8A%E5%8D%8811.29.22.png" alt="截屏2021-01-31 上午11.29.22"></p>
<ol>
<li><p>表达式树，最有价值的是当成思维逻辑结构中的数据结构</p>
</li>
<li><p>表达式求值程序，本质上就是对表达式树的递归遍历</p>
</li>
<li><p>重点观察表达式树的特性：根节点是整个表达式中优先级最低的运算符，也就是最后一个被计算的运算符</p>
</li>
</ol>
<p>   <strong>表达式求解程序</strong></p>
<ol>
<li><strong>Step1：</strong>找到表达式中优先级最低的运算符的位置</li>
<li><strong>Step2：</strong>递归计算运算符左右两侧表达式的值</li>
<li><strong>Step3：</strong>根据当前运算符获得运算结果</li>
</ol>
<p>   <strong>输出逆波兰式</strong></p>
<ol>
<li>表达式求解程序，本质上是对表达树的遍历</li>
<li>所以，采用后序遍历的方式，输出逆波兰式的结果</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x3f3f3f3f</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">char</span> *str, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pos = <span class="number">-1</span>, pri = INF - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> cur = INF;</span><br><span class="line">        <span class="keyword">switch</span> (str[i]) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>: cur = <span class="number">1</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>: cur = <span class="number">2</span>; <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cur &lt;= pri) &#123;</span><br><span class="line">            pos = i, pri = cur;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pos == <span class="number">-1</span>) &#123;<span class="comment">//表达式中已经没有运算符,全部都是数字</span></span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (str[i] &lt; <span class="string">&#x27;0&#x27;</span> || str[i] &gt; <span class="string">&#x27;9&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            num = num * <span class="number">10</span> + str[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//pos点为优先级最低点，分别计算左右子树的值</span></span><br><span class="line">    <span class="keyword">int</span> a = calc(str, l, pos - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> b = calc(str, pos + <span class="number">1</span>, r);</span><br><span class="line">    <span class="keyword">switch</span> (str[pos]) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span> : <span class="keyword">return</span> a + b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span> : <span class="keyword">return</span> a - b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span> : <span class="keyword">return</span> a * b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span> : <span class="keyword">return</span> a / b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> str[<span class="number">10000</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, str);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, calc(str, <span class="number">0</span>, <span class="built_in">strlen</span>(str) - <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x3f3f3f3f</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">char</span> *str, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pos = <span class="number">-1</span>, pri = INF - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>  temp = <span class="number">0</span>;<span class="comment">//带括号</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> cur = INF;</span><br><span class="line">        <span class="keyword">switch</span> (str[i]) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;(&#x27;</span>: temp += <span class="number">100</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;)&#x27;</span>: temp -= <span class="number">100</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>: cur = temp + <span class="number">1</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>: cur = temp + <span class="number">2</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;^&#x27;</span>: cur = temp + <span class="number">3</span>; <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cur &lt;= pri) &#123;</span><br><span class="line">            pos = i, pri = cur;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pos == <span class="number">-1</span>) &#123;<span class="comment">//表达式中已经没有运算符,全部都是数字</span></span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (str[i] &lt; <span class="string">&#x27;0&#x27;</span> || str[i] &gt; <span class="string">&#x27;9&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            num = num * <span class="number">10</span> + str[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//pos点为优先级最低点，分别计算左右子树的值</span></span><br><span class="line">    <span class="keyword">int</span> a = calc(str, l, pos - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> b = calc(str, pos + <span class="number">1</span>, r);</span><br><span class="line">    <span class="keyword">switch</span> (str[pos]) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span> : <span class="keyword">return</span> a + b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span> : <span class="keyword">return</span> a - b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span> : <span class="keyword">return</span> a * b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span> : <span class="keyword">return</span> a / b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;^&#x27;</span> : <span class="keyword">return</span> (<span class="keyword">int</span>)<span class="built_in">pow</span>(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> str[<span class="number">10000</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">&quot;%[^\n]s&quot;</span>, str)) &#123;</span><br><span class="line">        getchar();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s = %d\n&quot;</span>, str, calc(str, <span class="number">0</span>, <span class="built_in">strlen</span>(str) - <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(3 + 5) * (10 + 40) &#x3D; 400</span><br><span class="line">(2 + 3)^2 &#x3D; 25</span><br></pre></td></tr></table></figure>


<p>带^和()</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x3f3f3f3f</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">char</span> *str, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pos = <span class="number">-1</span>, pri = INF - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>  temp = <span class="number">0</span>;<span class="comment">//带括号</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> cur = INF;</span><br><span class="line">        <span class="keyword">switch</span> (str[i]) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;(&#x27;</span>: temp += <span class="number">100</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;)&#x27;</span>: temp -= <span class="number">100</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>: cur = temp + <span class="number">1</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>: cur = temp + <span class="number">2</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;^&#x27;</span>: cur = temp + <span class="number">3</span>; <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cur &lt;= pri) &#123;</span><br><span class="line">            pos = i, pri = cur;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pos == <span class="number">-1</span>) &#123;<span class="comment">//表达式中已经没有运算符,全部都是数字</span></span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (str[i] &lt; <span class="string">&#x27;0&#x27;</span> || str[i] &gt; <span class="string">&#x27;9&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            num = num * <span class="number">10</span> + str[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, num);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//pos点为优先级最低点，分别计算左右子树的值</span></span><br><span class="line">    <span class="keyword">int</span> a = calc(str, l, pos - <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> b = calc(str, pos + <span class="number">1</span>, r);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot; %c&quot;</span>, str[pos]);</span><br><span class="line">    <span class="keyword">switch</span> (str[pos]) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span> : <span class="keyword">return</span> a + b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span> : <span class="keyword">return</span> a - b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span> : <span class="keyword">return</span> a * b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span> : <span class="keyword">return</span> a / b;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;^&#x27;</span> : <span class="keyword">return</span> (<span class="keyword">int</span>)<span class="built_in">pow</span>(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> str[<span class="number">10000</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">&quot;%[^\n]s&quot;</span>, str)) &#123;</span><br><span class="line">        getchar();</span><br><span class="line">        <span class="keyword">int</span> val = calc(str, <span class="number">0</span>, <span class="built_in">strlen</span>(str) - <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s = %d\n&quot;</span>, str, val);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 5 + 10 40 + *</span><br><span class="line">(3 + 5) * (10 + 40) &#x3D; 400</span><br><span class="line">2 3 + 2 ^</span><br><span class="line">(2 + 3)^2 &#x3D; 25</span><br></pre></td></tr></table></figure>




<h2 id="2-根据三元组数列建立二叉链表"><a href="#2-根据三元组数列建立二叉链表" class="headerlink" title="2.根据三元组数列建立二叉链表"></a>2.根据三元组数列建立二叉链表</h2><p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-01-31%20%E4%B8%8B%E5%8D%884.42.10.png" alt="截屏2021-01-31 下午4.42.10"></p>
<p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-01-31%20%E4%B8%8B%E5%8D%884.42.21.png" alt="截屏2021-01-31 下午4.42.10"></p>
<ol>
<li>本质就是一个模拟题</li>
<li>模拟题的学习重点，就是学习各种各样的模拟技巧，以及对应的编码技巧</li>
<li><strong>技巧1：</strong>用一个数组，记录字符所对应的节点地址</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">lchild</span>, *<span class="title">rchild</span>;</span></span><br><span class="line">&#125; Node;</span><br><span class="line"></span><br><span class="line">Node *arr[<span class="number">26</span>];</span><br><span class="line"></span><br><span class="line"><span class="function">Node *<span class="title">getNewNode</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">    Node *p = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    p-&gt;ch = ch;</span><br><span class="line">    p-&gt;lchild = p-&gt;rchild = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> str[<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">output</span><span class="params">(Node *root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="literal">NULL</span>) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, root-&gt;ch);</span><br><span class="line">    <span class="keyword">if</span> (root-&gt;lchild == <span class="literal">NULL</span> &amp;&amp; root-&gt;rchild == <span class="literal">NULL</span>) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;(&quot;</span>);</span><br><span class="line">    output(root-&gt;lchild);</span><br><span class="line">    <span class="keyword">if</span> (root-&gt;rchild) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        output(root-&gt;rchild);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;)&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Node *root = <span class="literal">NULL</span>;</span><br><span class="line">    Node *p;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, str)) &#123;<span class="comment">//读入三元组</span></span><br><span class="line">        <span class="keyword">if</span> (str[<span class="number">0</span>] == <span class="string">&#x27;^&#x27;</span> &amp;&amp; str[<span class="number">1</span>] == <span class="string">&#x27;^&#x27;</span>) <span class="keyword">break</span>;<span class="comment">//已经读入到结尾</span></span><br><span class="line">        p = getNewNode(str[<span class="number">1</span>]);<span class="comment">//当前节点</span></span><br><span class="line">        arr[str[<span class="number">1</span>] - <span class="string">&#x27;A&#x27;</span>] = p;</span><br><span class="line">        <span class="keyword">if</span> (str[<span class="number">0</span>] == <span class="string">&#x27;^&#x27;</span>) &#123;</span><br><span class="line">            root = p;<span class="comment">//根节点</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断第三个字母</span></span><br><span class="line">        <span class="keyword">switch</span> (str[<span class="number">2</span>]) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;L&#x27;</span>: arr[str[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span>]-&gt;lchild = p; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;R&#x27;</span>: arr[str[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span>]-&gt;rchild = p; <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    output(root);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>








<h2 id="3-植物大战僵尸"><a href="#3-植物大战僵尸" class="headerlink" title="3.植物大战僵尸"></a>3.植物大战僵尸</h2><p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-01-31%20%E4%B8%8B%E5%8D%885.07.05.png" alt="截屏2021-01-31 下午5.07.05"></p>
<p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-01-31%20%E4%B8%8B%E5%8D%885.07.23.png" alt="s"></p>
<ol>
<li><strong>题目建模：</strong>每一轮，找到一个集合中的最大值，并且删掉这个最大值。所以，尝试用堆解决。</li>
<li><strong>题目难点：</strong>僵尸之间的相对顺序，时刻发生改变，而堆中，数据是不变的。</li>
<li><strong>问题简化：</strong>如果僵尸之间的相对顺序不变，这道题目，就可以用堆求解，甚至是简单的排序即可。</li>
<li><strong>发现突破口：</strong>当两个僵尸速度相同时，两个僵尸之间的相对位置就不会发生改变。</li>
<li>题目中，速度都是整数，且在1到100之间，也就是说，最多存在 100 种速度。</li>
<li>根据速度，建立 100 个堆，将速度相同的僵尸，塞到一个堆中</li>
<li>每一轮，在100个堆顶元素中，找到一个跑在最前面的僵尸，干掉即可</li>
</ol>
<p><strong>Bug-1：</strong>没有严格按照题目要求实现程序，没有考虑到位置相同的情况。</p>
<p><strong>Bug-2：</strong>写程序中的小笔误，在堆的 pop 操作中，参与比较的两个元素的下标错误。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> swap(a, b) &#123;\</span></span><br><span class="line">    __typeof(a) c = a;\</span><br><span class="line">    a = b, b = c;\</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 50000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Data</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> n, f, s;<span class="comment">//n代表编号，总数量,有n个僵尸,第一秒的速度为f,之后的速度为s</span></span><br><span class="line">&#125; Data;</span><br><span class="line"></span><br><span class="line">Data heap[<span class="number">101</span>][MAX_N + <span class="number">5</span>];<span class="comment">//堆</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gt</span><span class="params">(Data a, Data b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a.f - b.f) <span class="keyword">return</span> a.f &gt; b.f;</span><br><span class="line">    <span class="keyword">return</span> a.n &lt; b.n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(Data *h, Data val)</span> </span>&#123;</span><br><span class="line">    h[++h[<span class="number">0</span>].n] = val;</span><br><span class="line">    <span class="keyword">int</span> ind = h[<span class="number">0</span>].n;</span><br><span class="line">    <span class="keyword">while</span> (ind / <span class="number">2</span> &amp;&amp; gt(h[ind], h[ind / <span class="number">2</span>])) &#123;</span><br><span class="line">        swap(h[ind], h[ind / <span class="number">2</span>]);</span><br><span class="line">        ind /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">(Data *h)</span> </span>&#123;</span><br><span class="line">    swap(h[<span class="number">1</span>], h[h[<span class="number">0</span>].n]);</span><br><span class="line">    h[<span class="number">0</span>].n -= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> ind = <span class="number">1</span>, temp;</span><br><span class="line">    <span class="keyword">while</span> (ind * <span class="number">2</span> &lt;= h[<span class="number">0</span>].n) &#123;</span><br><span class="line">        temp = ind;</span><br><span class="line">        <span class="keyword">if</span> (gt(h[ind * <span class="number">2</span>], h[temp])) temp = ind * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (ind * <span class="number">2</span> + <span class="number">1</span> &lt;= h[<span class="number">0</span>].n &amp;&amp; gt(h[ind * <span class="number">2</span> + <span class="number">1</span>], h[temp])) temp = ind * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (temp == ind) <span class="keyword">break</span>;<span class="comment">//向下调整到了合适的位置</span></span><br><span class="line">        swap(h[temp], h[ind]);</span><br><span class="line">        ind =  temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">empty</span><span class="params">(Data *h)</span> </span>&#123; <span class="keyword">return</span> h[<span class="number">0</span>].n == <span class="number">0</span>; &#125;</span><br><span class="line"><span class="function">Data <span class="title">top</span><span class="params">(Data *h)</span> </span>&#123; <span class="keyword">return</span> h[<span class="number">1</span>]; &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">(Data *h)</span> </span>&#123; h[<span class="number">0</span>].n = <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init_heap</span><span class="params">()</span> </span>&#123;<span class="comment">//清空堆</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) clear(heap[i]);</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    init_heap();</span><br><span class="line">    <span class="keyword">int</span> n, f, s;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;f, &amp;s);</span><br><span class="line">        Data d = &#123;i, f, s&#125;;</span><br><span class="line">        push(heap[s], d);<span class="comment">//插入堆中</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;<span class="comment">//干掉n个僵尸</span></span><br><span class="line">        <span class="keyword">int</span> ind = <span class="number">0</span>, pos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">100</span>; j++) &#123;<span class="comment">//找到跑在最前面的僵尸</span></span><br><span class="line">            <span class="keyword">if</span> (empty(heap[j])) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> cur_pos = (i - <span class="number">1</span>) * j + top(heap[j]).f;</span><br><span class="line">            <span class="keyword">if</span> (ind == <span class="number">0</span>) &#123;</span><br><span class="line">                ind = j, pos = cur_pos;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pos &lt; cur_pos || (pos == cur_pos &amp;&amp; top(heap[j]).n &lt; top(heap[ind]).n)) &#123;</span><br><span class="line">                ind = j, pos = cur_pos;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i - <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="comment">//printf(&quot;%d %d %d %d\n&quot;, top(heap[ind]).n, top(heap[ind]).f, ind, pos);</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, top(heap[ind]).n);<span class="comment">//干掉僵尸</span></span><br><span class="line">        pop(heap[ind]);<span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tcase, n = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;tcase);</span><br><span class="line">    <span class="keyword">while</span> ((n++) &lt; tcase) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case #%d:\n&quot;</span>, n);</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="10-课程答疑-二-1"><a href="#10-课程答疑-二-1" class="headerlink" title="10.课程答疑(二)1"></a>10.课程答疑(二)1</h1><h2 id="一、预习资料-【数据结构】-最短路简化"><a href="#一、预习资料-【数据结构】-最短路简化" class="headerlink" title="一、预习资料-【数据结构】-最短路简化"></a>一、预习资料-【数据结构】-最短路简化</h2><ol>
<li>广搜裸题</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#define MAX_N 1000</span><br><span class="line">int g[MAX_N + 5][MAX_N + 5];</span><br><span class="line">inline void add(int a, int b) &#123;</span><br><span class="line">    g[a][++g[a][0]] &#x3D; b;</span><br><span class="line">    g[b][++g[b][0]] &#x3D; a;</span><br><span class="line">    return ;</span><br><span class="line">&#125;</span><br><span class="line">int ans[MAX_N + 5];</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n, m, c;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; c;</span><br><span class="line">    for (int i &#x3D; 0, a, b; i &lt; m; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        add(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">    queue&lt;int&gt; q;</span><br><span class="line">    ans[c] &#x3D; 1;</span><br><span class="line">    q.push(c);</span><br><span class="line">    while (!q.empty()) &#123;</span><br><span class="line">        int ind &#x3D; q.front();</span><br><span class="line">        for (int i &#x3D; 1; i &lt;&#x3D; g[ind][0]; i++) &#123;</span><br><span class="line">            int to &#x3D; g[ind][i];</span><br><span class="line">            if (ans[to]) continue;</span><br><span class="line">            ans[to] &#x3D; ans[ind] + 1;</span><br><span class="line">            q.push(to);</span><br><span class="line">        &#125;</span><br><span class="line">        q.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i &#x3D; 1; i &lt;&#x3D; n; i++) &#123;</span><br><span class="line">        cout &lt;&lt; ans[i] - 1 &lt;&lt; endl;</span><br><span class="line">    &#125;    </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="二、预习资料-【数据结构】-游戏分组"><a href="#二、预习资料-【数据结构】-游戏分组" class="headerlink" title="二、预习资料-【数据结构】-游戏分组"></a>二、预习资料-【数据结构】-游戏分组</h2><ol>
<li>并查集裸题</li>
<li>并查集的简化实现方式</li>
<li><strong>路径压缩：</strong>代码实现短，优化效果明显</li>
<li><strong>按秩优化：</strong>代码实现稍复杂，对于随机数据的优化效果一般，还需要占用额外的存储空间</li>
<li>在快速编码的场景中，只需要实现路径压缩即可</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#define MAX_N 1000000</span><br><span class="line">int fa[MAX_N + 5];</span><br><span class="line">int get(int x) &#123;</span><br><span class="line">    return fa[x] &#x3D; (x &#x3D;&#x3D; fa[x] ? x : get(fa[x]));</span><br><span class="line">&#125;</span><br><span class="line">void merge(int a, int b) &#123;</span><br><span class="line">    fa[get(a)] &#x3D; get(b);</span><br><span class="line">    return ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    for (int i &#x3D; 0; i &lt; n; i++) fa[i] &#x3D; i;</span><br><span class="line">    for (int i &#x3D; 0, a, b; i &lt; m; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        merge(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">    int ans &#x3D; 0;</span><br><span class="line">    for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">        ans +&#x3D; (fa[i] &#x3D;&#x3D; i);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="三、预习资料-【数据结构】-字符串旋转矩阵"><a href="#三、预习资料-【数据结构】-字符串旋转矩阵" class="headerlink" title="三、预习资料-【数据结构】-字符串旋转矩阵"></a>三、预习资料-【数据结构】-字符串旋转矩阵</h2><ol>
<li>首要解决的问题：还原原字符串</li>
<li><strong>Step1：</strong>通过最后一列的字符，确定相应的第一列的字符</li>
<li><strong>Step2：</strong>得出结论，相同字符的相对顺序在第一列和最后一列中相同</li>
<li><strong>Step3：</strong>确定了每一个字符的编号，以及编号与编号之间的前后关系，即可还原原字符串</li>
<li>由于反复标记 fail 指针链上的状态，导致时间超限，在这里有一个特殊的程序优化</li>
</ol>
<p><img src="../guanghu/Library/Application%2520Support/typora-user-images/image-20210124215823630.png" alt="image-20210124215823630"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#define MAX_N 110000</span><br><span class="line">char t[MAX_N + 5], s[MAX_N + 5];</span><br><span class="line">int ind[MAX_N + 5], *ans[MAX_N + 5];</span><br><span class="line"></span><br><span class="line">bool cmp(int i, int j) &#123;</span><br><span class="line">    if (t[i] - t[j]) return t[i] &lt; t[j];</span><br><span class="line">    return i &lt; j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void convert(char *t, char *s) &#123;</span><br><span class="line">    int n &#x3D; 0;</span><br><span class="line">    for (n &#x3D; 0; t[n]; n++) ind[n] &#x3D; n;</span><br><span class="line">    sort(ind, ind + n, cmp);</span><br><span class="line">    for (int i &#x3D; 0, p &#x3D; ind[0]; i &lt; n; i++, p &#x3D; ind[p]) &#123;</span><br><span class="line">        s[i] &#x3D; t[p];</span><br><span class="line">    &#125;</span><br><span class="line">    s[n] &#x3D; 0;</span><br><span class="line">    return ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct Node &#123;</span><br><span class="line">    int flag, *ans;</span><br><span class="line">    int next[26], fail;</span><br><span class="line">&#125; tree[2000005];</span><br><span class="line">int que[2000005], head, tail;</span><br><span class="line">int root &#x3D; 1, cnt &#x3D; 2;</span><br><span class="line">inline int getNewNode() &#123; return cnt++; &#125;</span><br><span class="line">int *insert(char *s) &#123;</span><br><span class="line">    int p &#x3D; root;</span><br><span class="line">    for (int i &#x3D; 0; s[i]; i++) &#123;</span><br><span class="line">        int ind &#x3D; s[i] - &#39;a&#39;;</span><br><span class="line">        if (tree[p].next[ind] &#x3D;&#x3D; 0) tree[p].next[ind] &#x3D; getNewNode();</span><br><span class="line">        p &#x3D; tree[p].next[ind];</span><br><span class="line">    &#125;</span><br><span class="line">    tree[p].flag &#x3D; 1;</span><br><span class="line">    if (tree[p].ans &#x3D;&#x3D; NULL) &#123;</span><br><span class="line">        tree[p].ans &#x3D; new int(0);</span><br><span class="line">    &#125;</span><br><span class="line">    return tree[p].ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void build() &#123;</span><br><span class="line">    head &#x3D; tail &#x3D; 0;</span><br><span class="line">    tree[root].fail &#x3D; 0;</span><br><span class="line">    for (int i &#x3D; 0; i &lt; 26; i++) &#123;</span><br><span class="line">        if (tree[root].next[i] &#x3D;&#x3D; 0) &#123;</span><br><span class="line">            tree[root].next[i] &#x3D; root;</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line">        tree[tree[root].next[i]].fail &#x3D; root;</span><br><span class="line">        que[tail++] &#x3D; tree[root].next[i];</span><br><span class="line">    &#125;</span><br><span class="line">    while (head &lt; tail) &#123;</span><br><span class="line">        int p &#x3D; que[head++];</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 26; i++) &#123;</span><br><span class="line">            int c &#x3D; tree[p].next[i], k &#x3D; tree[p].fail;</span><br><span class="line">            if (c &#x3D;&#x3D; 0) &#123;</span><br><span class="line">                tree[p].next[i] &#x3D; tree[k].next[i];</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            tree[c].fail &#x3D; tree[k].next[i];</span><br><span class="line">            que[tail++] &#x3D; c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void match(char *s) &#123;</span><br><span class="line">    for (int i &#x3D; 0, p &#x3D; tree[root].next[s[0] - &#39;a&#39;], q, k; s[i]; i++, p &#x3D; tree[p].next[s[i] - &#39;a&#39;]) &#123;</span><br><span class="line">        q &#x3D; p;</span><br><span class="line">        while (q) &#123;</span><br><span class="line">            if (tree[q].flag) &#123;</span><br><span class="line">                *tree[q].ans +&#x3D; 1;</span><br><span class="line">            &#125;</span><br><span class="line">            k &#x3D; q;</span><br><span class="line">            q &#x3D; tree[q].fail;</span><br><span class="line">            tree[k].fail &#x3D; 0;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void init() &#123;</span><br><span class="line">    cnt &#x3D; 2;</span><br><span class="line">    memset(tree, 0, sizeof(tree));</span><br><span class="line">    memset(ans, 0, sizeof(ans));</span><br><span class="line">    return ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int solve(char *t) &#123;</span><br><span class="line">    init();</span><br><span class="line">    convert(t, s);</span><br><span class="line">    int n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        ans[i] &#x3D; insert(t);</span><br><span class="line">    &#125;</span><br><span class="line">    build();</span><br><span class="line">    match(s + 1);</span><br><span class="line">    for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">        cout &lt;&lt; (ans[i][0] ? &quot;YES&quot; : &quot;NO&quot;) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    while (cin &gt;&gt; t) solve(t);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="四、预习资料-【数据结构】-灌溉"><a href="#四、预习资料-【数据结构】-灌溉" class="headerlink" title="四、预习资料-【数据结构】-灌溉"></a>四、预习资料-【数据结构】-灌溉</h2><h3 id="最小生成树问题-Kruskal-算法"><a href="#最小生成树问题-Kruskal-算法" class="headerlink" title="最小生成树问题-Kruskal 算法"></a>最小生成树问题-Kruskal 算法</h3><ol>
<li>Step1：对于所有边从小到大排序</li>
<li>Step2：依次取出每一条边，试着加入图中，边上的两个点不联通的情况下，才将边加入图中</li>
</ol>
<p>除了学习一个新算法以外，这道题目，一无是处。</p>
<p><img src="../guanghu/Library/Application%2520Support/typora-user-images/image-20210124215840760.png" alt="image-20210124215840760"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">#define MAX_N 10000</span><br><span class="line">struct Edge &#123;</span><br><span class="line">    int v, u, c;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Edge&gt; e;</span><br><span class="line"></span><br><span class="line">bool cmp(const Edge &amp;a, const Edge &amp;b) &#123;</span><br><span class="line">    return a.c &lt; b.c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int fa[MAX_N + 5];</span><br><span class="line">int get(int x) &#123;</span><br><span class="line">    return fa[x] &#x3D; (x - fa[x] ? get(fa[x]) : x);</span><br><span class="line">&#125;</span><br><span class="line">void merge(int a, int b) &#123;</span><br><span class="line">    fa[get(a)] &#x3D; get(b);</span><br><span class="line">&#125;</span><br><span class="line">void init(int n) &#123;</span><br><span class="line">    for (int i &#x3D; 0; i &lt;&#x3D; n; i++) fa[i] &#x3D; i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    for (int i &#x3D; 1, a; i &lt;&#x3D; n; i++) &#123;</span><br><span class="line">        for (int j &#x3D; 1; j &lt;&#x3D; n; j++) &#123;</span><br><span class="line">            cin &gt;&gt; a;</span><br><span class="line">            if (i &lt; j) e.push_back(&#123;i, j, a&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(e.begin(), e.end(), cmp);</span><br><span class="line">    init(n);</span><br><span class="line">    int ans &#x3D; 0;</span><br><span class="line">    for (int i &#x3D; 0; i &lt; e.size(); i++) &#123;</span><br><span class="line">        int v &#x3D; e[i].v, u &#x3D; e[i].u, c &#x3D; e[i].c;</span><br><span class="line">        if (get(v) &#x3D;&#x3D; get(u)) continue;</span><br><span class="line">        merge(v, u);</span><br><span class="line">        ans +&#x3D; c;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="五、Leetcode-05-最长回文子串"><a href="#五、Leetcode-05-最长回文子串" class="headerlink" title="五、Leetcode-05-最长回文子串"></a>五、Leetcode-05-最长回文子串</h2><h3 id="Manacher-算法"><a href="#Manacher-算法" class="headerlink" title="Manacher 算法"></a>Manacher 算法</h3><ol>
<li>Step1：对原字符串进行特殊处理，在每两个字符中间加入 # 字符</li>
<li>Step2：依次求解每一个位置的最大回文半径</li>
<li>在求解过程中，记录一个 c 点，$c+r[c]$ 最大</li>
<li>求回文半径时：要不然借助原有信息，要不然就是暴力匹配，暴力匹配过程，均摊时间复杂度 O(1)</li>
<li><strong>时间复杂度：</strong>O(n)</li>
</ol>
<p><img src="../guanghu/Library/Application%2520Support/typora-user-images/image-20210124215852853.png" alt="image-20210124215852853"></p>
<p><img src="../guanghu/Library/Application%2520Support/typora-user-images/image-20210124215900772.png" alt="image-20210124215900772"></p>
<p><img src="../guanghu/Library/Application%2520Support/typora-user-images/image-20210124215910516.png" alt="image-20210124215910516"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    string get_new_string(string &amp;s) &#123;</span><br><span class="line">        string ns &#x3D; &quot;#&quot;;</span><br><span class="line">        for (int i &#x3D; 0; s[i]; i++) &#123;</span><br><span class="line">            (ns +&#x3D; s[i]) +&#x3D; &quot;#&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        return ns;</span><br><span class="line">    &#125;</span><br><span class="line">    string longestPalindrome(string s) &#123;</span><br><span class="line">        string ns &#x3D; get_new_string(s);</span><br><span class="line">        int *r &#x3D; new int[ns.size()], c;</span><br><span class="line">        r[0] &#x3D; 1, c &#x3D; 0;</span><br><span class="line">        for (int i &#x3D; 1; i &lt; ns.size(); i++) &#123;</span><br><span class="line">            if (i &gt;&#x3D; c + r[c]) &#123;</span><br><span class="line">                r[i] &#x3D; 1;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                r[i] &#x3D; min(c + r[c] - i, r[2 * c - i]);</span><br><span class="line">            &#125;</span><br><span class="line">            while (i - r[i] &gt;&#x3D; 0 &amp;&amp; ns[i - r[i]] &#x3D;&#x3D; ns[i + r[i]]) r[i] +&#x3D; 1;</span><br><span class="line">            if (i + r[i] &gt; c + r[c]) c &#x3D; i;</span><br><span class="line">        &#125;</span><br><span class="line">        int ans &#x3D; 0;</span><br><span class="line">        string ret &#x3D; &quot;&quot;;</span><br><span class="line">        for (int i &#x3D; 0; ns[i]; i++) &#123;</span><br><span class="line">            if (r[i] &lt;&#x3D; ans) continue;</span><br><span class="line">            ans &#x3D; r[i];</span><br><span class="line">            ret &#x3D; &quot;&quot;;</span><br><span class="line">            for (int j &#x3D; i - r[i] + 1; j &lt; i + r[i]; j++) &#123;</span><br><span class="line">                if (ns[j] &#x3D;&#x3D; &#39;#&#39;) continue;</span><br><span class="line">                ret +&#x3D; ns[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    Solution solv;</span><br><span class="line">    string s;</span><br><span class="line">    while (cin &gt;&gt; s) &#123;</span><br><span class="line">        cout &lt;&lt; solv.longestPalindrome(s) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="11-课程答疑-三"><a href="#11-课程答疑-三" class="headerlink" title="11.课程答疑(三)"></a>11.课程答疑(三)</h1><h2 id="一、【中等】leetcode-146-LRU缓存机制"><a href="#一、【中等】leetcode-146-LRU缓存机制" class="headerlink" title="一、【中等】leetcode-146-LRU缓存机制"></a>一、【中等】leetcode-146-LRU缓存机制</h2><p><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/lru-cache/">leetcode-146-LRU缓存机制</a></p>
<p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-02-01%20%E4%B8%8A%E5%8D%8811.20.38.png" alt="截屏2021-02-01 上午11.20.38"></p>
<p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-02-01%20%E4%B8%8A%E5%8D%8811.20.47.png" alt="截屏2021-02-01 上午11.20.47"></p>
<ol>
<li>哈希表 + 链表解决 $O(1)$ 读取，以及 $O(1)$ 修改缓存数据节点位置的操作</li>
<li><strong>弯路1：</strong>一开始想到了哈希表，但忽略了利用链表实现 $O(1)$ 修改</li>
<li><strong>弯路2：</strong>由于头尾指针会发生变化，忽略了虚拟节点的处理技巧</li>
</ol>
<p>代码演示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;unordered_map&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class LRUCache &#123;</span><br><span class="line">public:</span><br><span class="line">    class Node &#123;</span><br><span class="line">    public :</span><br><span class="line">        Node() : Node(0, 0) &#123;&#125;</span><br><span class="line">        Node(int key, int value) : pre(nullptr), next(nullptr), key(key), value(value) &#123;&#125;</span><br><span class="line">        Node *pre, *next;</span><br><span class="line">        int key, value;</span><br><span class="line">    &#125;;</span><br><span class="line">    int capacity, node_cnt;</span><br><span class="line">    unordered_map&lt;int, Node *&gt; ind;</span><br><span class="line">    Node head, tail;</span><br><span class="line">    LRUCache(int capacity) &#123;</span><br><span class="line">        this-&gt;capacity &#x3D; capacity;</span><br><span class="line">        this-&gt;node_cnt &#x3D; 0;</span><br><span class="line">        head.next &#x3D; &amp;tail;</span><br><span class="line">        tail.pre &#x3D; &amp;head;</span><br><span class="line">    &#125;</span><br><span class="line">    int get(int key) &#123;</span><br><span class="line">        if (ind.find(key) &#x3D;&#x3D; ind.end()) return -1;</span><br><span class="line">        Node *p &#x3D; ind[key];</span><br><span class="line">        remove_node(p);</span><br><span class="line">        insert_tail(p);</span><br><span class="line">        return p-&gt;value;</span><br><span class="line">    &#125;</span><br><span class="line">    void output() &#123;</span><br><span class="line">        Node *p &#x3D; head.next;</span><br><span class="line">        while (p) &#123;</span><br><span class="line">            cout &lt;&lt; &quot;(&quot; &lt;&lt; p-&gt;key &lt;&lt; &quot;, &quot; &lt;&lt; p-&gt;value &lt;&lt; &quot;)-&gt;&quot;;</span><br><span class="line">            p &#x3D; p-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void remove_node(Node *p) &#123;</span><br><span class="line">        p-&gt;next-&gt;pre &#x3D; p-&gt;pre;</span><br><span class="line">        p-&gt;pre-&gt;next &#x3D; p-&gt;next;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void insert_tail(Node *p) &#123;</span><br><span class="line">        p-&gt;next &#x3D; &amp;tail;</span><br><span class="line">        p-&gt;pre &#x3D; tail.pre;</span><br><span class="line">        tail.pre &#x3D; p;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void put(int key, int value) &#123;</span><br><span class="line">        Node *p;</span><br><span class="line">        if (ind.find(key) &#x3D;&#x3D; ind.end()) &#123;</span><br><span class="line">            p &#x3D; new Node(key, value);</span><br><span class="line">            node_cnt +&#x3D; 1;</span><br><span class="line">            insert_tail(p);</span><br><span class="line">            ind[key] &#x3D; p;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            get(key);</span><br><span class="line">        &#125;</span><br><span class="line">        if (node_cnt &gt; capacity) &#123;</span><br><span class="line">            p &#x3D; head.next;</span><br><span class="line">            remove_node(p);</span><br><span class="line">            delete p;</span><br><span class="line">            node_cnt -&#x3D; 1;</span><br><span class="line">        &#125;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * Your LRUCache object will be instantiated and called as such:</span><br><span class="line"> * LRUCache* obj &#x3D; new LRUCache(capacity);</span><br><span class="line"> * int param_1 &#x3D; obj-&gt;get(key);</span><br><span class="line"> * obj-&gt;put(key,value);</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="二、【困难】Leetcode-460-LFU缓存"><a href="#二、【困难】Leetcode-460-LFU缓存" class="headerlink" title="二、【困难】Leetcode-460-LFU缓存"></a>二、【困难】Leetcode-460-LFU缓存</h2><ol>
<li>编码较复杂，基于十字链表实现 LFU 缓存机制</li>
<li>将出现次数相同的节点，存储在同一个 LRUCache 中</li>
<li>将所有非空的 LRUCache ，按照代表的次数，链接成一个大链表</li>
<li>删除节点的操作，简化成了：删除第一个 LRUCache 中的头结点</li>
<li><strong>操作1：</strong>删除一个节点</li>
<li><strong>操作2：</strong>新增一个节点</li>
<li><strong>操作3：</strong>将一个现有节点，移动到下一个 LRUCache 中</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;unordered_map&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Node &#123;</span><br><span class="line">public :</span><br><span class="line">    Node() : Node(0, 0) &#123;&#125;</span><br><span class="line">    Node(int key, int value) </span><br><span class="line">    : pre(nullptr), next(nullptr), </span><br><span class="line">    key(key), value(value), cnt(0) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    Node *pre, *next;</span><br><span class="line">    int key, value, cnt;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class LRUCache &#123;</span><br><span class="line">public:</span><br><span class="line">    int node_cnt;</span><br><span class="line">    Node head, tail;</span><br><span class="line">    LRUCache *pre, *next;</span><br><span class="line">    LRUCache() : pre(nullptr), next(nullptr) &#123;</span><br><span class="line">        this-&gt;node_cnt &#x3D; 0;</span><br><span class="line">        head.next &#x3D; &amp;tail;</span><br><span class="line">        tail.pre &#x3D; &amp;head;</span><br><span class="line">    &#125;</span><br><span class="line">    void output() &#123;</span><br><span class="line">        return ;</span><br><span class="line">        Node *p &#x3D; head.next;</span><br><span class="line">        while (p) &#123;</span><br><span class="line">            cout &lt;&lt; &quot;(&quot; &lt;&lt; p-&gt;key &lt;&lt; &quot;, &quot; &lt;&lt; p-&gt;value &lt;&lt; &quot;)-&gt;&quot;;</span><br><span class="line">            p &#x3D; p-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        p &#x3D; tail.pre;</span><br><span class="line">        while (p) &#123;</span><br><span class="line">            cout &lt;&lt; &quot;(&quot; &lt;&lt; p-&gt;key &lt;&lt; &quot;, &quot; &lt;&lt; p-&gt;value &lt;&lt; &quot;)-&gt;&quot;;</span><br><span class="line">            p &#x3D; p-&gt;pre;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void remove_node(Node *p) &#123;</span><br><span class="line">        p-&gt;next-&gt;pre &#x3D; p-&gt;pre;</span><br><span class="line">        p-&gt;pre-&gt;next &#x3D; p-&gt;next;</span><br><span class="line">        node_cnt -&#x3D; 1;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void insert_tail(Node *p) &#123;</span><br><span class="line">        p-&gt;next &#x3D; &amp;tail;</span><br><span class="line">        p-&gt;pre &#x3D; tail.pre;</span><br><span class="line">        tail.pre-&gt;next &#x3D; p;</span><br><span class="line">        tail.pre &#x3D; p;</span><br><span class="line">        node_cnt +&#x3D; 1;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void put(Node *p) &#123;</span><br><span class="line">        insert_tail(p);</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    Node *pop() &#123;</span><br><span class="line">        Node *p &#x3D; head.next;</span><br><span class="line">        head.next &#x3D; p-&gt;next;</span><br><span class="line">        node_cnt -&#x3D; 1;</span><br><span class="line">        return p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class LFUCache &#123;</span><br><span class="line">public:</span><br><span class="line">    unordered_map&lt;int, LRUCache *&gt; lfu;</span><br><span class="line">    unordered_map&lt;int, Node *&gt; ind;</span><br><span class="line">    LRUCache head, tail;</span><br><span class="line">    int capacity, node_cnt;</span><br><span class="line">    LFUCache(int capacity) : capacity(capacity), node_cnt(0) &#123;</span><br><span class="line">        head.next &#x3D; &amp;tail;</span><br><span class="line">        tail.pre &#x3D; &amp;head;</span><br><span class="line">    &#125;</span><br><span class="line">    void remove_from_LRUCache(Node *p) &#123;</span><br><span class="line">        LRUCache *c1 &#x3D; lfu[p-&gt;cnt];</span><br><span class="line">        c1-&gt;remove_node(p);</span><br><span class="line">        if (c1-&gt;node_cnt &#x3D;&#x3D; 0) &#123;</span><br><span class="line">            remove_LRUCache(c1);</span><br><span class="line">            lfu.erase(lfu.find(p-&gt;cnt));</span><br><span class="line">            delete(c1);</span><br><span class="line">        &#125;</span><br><span class="line">        node_cnt -&#x3D; 1;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void insert_to_LRUCache(Node *p) &#123;</span><br><span class="line">        LRUCache *c &#x3D; lfu[p-&gt;cnt];</span><br><span class="line">        c-&gt;put(p);</span><br><span class="line">        node_cnt +&#x3D; 1;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void remove_LRUCache(LRUCache *c) &#123;</span><br><span class="line">        c-&gt;next-&gt;pre &#x3D; c-&gt;pre;</span><br><span class="line">        c-&gt;pre-&gt;next &#x3D; c-&gt;next;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void insert_LRUCache(LRUCache *c1, LRUCache *c2) &#123;</span><br><span class="line">        c2-&gt;pre &#x3D; c1, c2-&gt;next &#x3D; c1-&gt;next;</span><br><span class="line">        c1-&gt;next-&gt;pre &#x3D; c2, c1-&gt;next &#x3D; c2;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    void move_next_LRUCache(Node *p) &#123;</span><br><span class="line">        LRUCache *c1 &#x3D; lfu[p-&gt;cnt], *c2;</span><br><span class="line">        if (lfu.find(p-&gt;cnt + 1) &#x3D;&#x3D; lfu.end()) &#123;</span><br><span class="line">            c2 &#x3D; new LRUCache();</span><br><span class="line">            insert_LRUCache(c1, c2);</span><br><span class="line">            lfu[p-&gt;cnt + 1] &#x3D; c2;</span><br><span class="line">        &#125;</span><br><span class="line">        remove_from_LRUCache(p);</span><br><span class="line">        p-&gt;cnt +&#x3D; 1;</span><br><span class="line">        insert_to_LRUCache(p);</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int get(int key) &#123;</span><br><span class="line">        if (ind.find(key) &#x3D;&#x3D; ind.end()) return -1;</span><br><span class="line">        Node *p &#x3D; ind[key];</span><br><span class="line">        move_next_LRUCache(p);</span><br><span class="line">        return p-&gt;value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    void put(int key, int value) &#123;</span><br><span class="line">        Node *p;</span><br><span class="line">        if (ind.find(key) &#x3D;&#x3D; ind.end()) &#123;</span><br><span class="line">            if (node_cnt &#x3D;&#x3D; capacity) &#123;</span><br><span class="line">                remove_from_LRUCache(head.next-&gt;head.next);</span><br><span class="line">            &#125;</span><br><span class="line">            p &#x3D; new Node(key, value);</span><br><span class="line">            if (lfu.find(p-&gt;cnt) &#x3D;&#x3D; lfu.end()) &#123;</span><br><span class="line">                lfu[p-&gt;cnt] &#x3D; new LRUCache();</span><br><span class="line">                insert_LRUCache(&amp;head, lfu[p-&gt;cnt]);</span><br><span class="line">            &#125;</span><br><span class="line">            insert_to_LRUCache(p);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            move_next_LRUCache(ind[key]);</span><br><span class="line">            ind[key]-&gt;value &#x3D; value;</span><br><span class="line">        &#125;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<h1 id="12-习题答疑课-四"><a href="#12-习题答疑课-四" class="headerlink" title="12.习题答疑课(四)"></a>12.习题答疑课(四)</h1><h2 id="一、HZOJ-328-楼兰图腾"><a href="#一、HZOJ-328-楼兰图腾" class="headerlink" title="一、HZOJ-328-楼兰图腾"></a>一、HZOJ-328-楼兰图腾</h2><p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-02-01%20%E4%B8%8B%E5%8D%885.02.59.png" alt="截屏2021-02-01 下午5.02.59"></p>
<p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-02-01%20%E4%B8%8B%E5%8D%885.03.08.png" alt="截屏2021-02-01 下午5.03.08"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">	&gt; File Name: 2.HZOJ328-60.cpp</span></span><br><span class="line"><span class="comment">	&gt; Author: huguang</span></span><br><span class="line"><span class="comment">	&gt; Mail: hug@haizeix.com</span></span><br><span class="line"><span class="comment">	&gt; Created Time: </span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> max_n 200000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((x) &amp; (-x))</span></span><br><span class="line"><span class="keyword">int</span> num[max_n + <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> j, <span class="keyword">int</span> v, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (j&lt;=n) &#123;</span><br><span class="line">        num[j] += v;</span><br><span class="line">        j += lowbit(j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">alg</span><span class="params">(<span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (j) &#123;</span><br><span class="line">        sum += num[j];</span><br><span class="line">        j -= lowbit(j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> n,a,x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a;</span><br><span class="line">        add(a + <span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> q = alg(a);</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> w = i - <span class="number">1</span> - q;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> e = n - a - w;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> r = a - <span class="number">1</span> - q;</span><br><span class="line">        x +=  w * e;</span><br><span class="line">        y +=  q * r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; y;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>






<h2 id="二、HZOJ-224-复合线段树"><a href="#二、HZOJ-224-复合线段树" class="headerlink" title="二、HZOJ-224-复合线段树"></a>二、HZOJ-224-复合线段树</h2><p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-02-01%20%E4%B8%8B%E5%8D%885.18.34.png" alt="截屏2021-02-01 下午5.18.34"></p>
<p><img src="https://guziqiu-pictures.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-02-01%20%E4%B8%8B%E5%8D%885.18.43.png" alt="截屏2021-02-01 下午5.18.43"></p>
<h3 id="1、解题思路"><a href="#1、解题思路" class="headerlink" title="1、解题思路"></a>1、解题思路</h3><ol>
<li>因为要支持区间操作，所以要用到线段树的懒标记技巧</li>
<li>有两种区间修改操作，乘法与加法</li>
<li>$a\times(s + b) = a \times s + a \times b$，可知乘法操作的时候，需要同时修改区间和值与加法懒标记</li>
<li>加法懒标记只需要单独修改加法懒标记即可</li>
<li>懒标记更新技巧：先下沉乘法懒标记，再下沉加法懒标记</li>
</ol>
<p><img src="../guanghu/Library/Application%2520Support/typora-user-images/image-20210130215543216.png" alt="image-20210130215543216"></p>
<h3 id="2、0分程序改-BUG"><a href="#2、0分程序改-BUG" class="headerlink" title="2、0分程序改 BUG"></a>2、0分程序改 BUG</h3><ol>
<li>主要 BUG，超过内存限制</li>
<li>原因分析：程序中，将懒标记改成了记录具体的操作序列，所以使得线段树节点空间激增，超过内存限制</li>
<li>在不修改懒标记技巧的情况下，无法满分通过程序</li>
<li><strong>思考：</strong>如果把线段树的节点修改成动态申请的，说不定会通过空间限制。</li>
</ol>
<h3 id="3、10分程序改-BUG"><a href="#3、10分程序改-BUG" class="headerlink" title="3、10分程序改 BUG"></a>3、10分程序改 BUG</h3><ol>
<li>懒标记更新方式严重错误，源程序中将懒标记更新到了整棵子树中。</li>
<li><strong>修改1：</strong>懒标记从父节点，只下沉到直接子节点处</li>
<li><strong>修改2：</strong>标记下沉时，要先将乘法标记下沉，再将加法标记下沉</li>
<li><strong>修改3：</strong>该 $%p$ 的地方就 $%p$</li>
</ol>
<h3 id="4、50分程序改-BUG"><a href="#4、50分程序改-BUG" class="headerlink" title="4、50分程序改 BUG"></a>4、50分程序改 BUG</h3><ol>
<li>下沉乘法懒标记时出错，应该同时修改加法懒标记</li>
<li><strong>修改1：</strong>将乘法标记下沉与加法标记下沉分成两个函数分别实现</li>
<li><strong>修改2：</strong>将数据类型改成 $long\ long$</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 100000</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> sum, t1, t2;</span><br><span class="line">&#125; tree[(MAX_N &lt;&lt; <span class="number">2</span>) + <span class="number">5</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> a[MAX_N + <span class="number">5</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> n, m, p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mul_tag</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> ind, <span class="keyword">long</span> <span class="keyword">long</span> x)</span> </span>&#123;</span><br><span class="line">    tree[ind].sum *= x;</span><br><span class="line">    tree[ind].sum %= p;</span><br><span class="line">    tree[ind].t1 *= x;</span><br><span class="line">    tree[ind].t1 %= p;</span><br><span class="line">    tree[ind].t2 *= x;</span><br><span class="line">    tree[ind].t2 %= p;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_tag</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> ind, <span class="keyword">long</span> <span class="keyword">long</span> x, <span class="keyword">long</span> <span class="keyword">long</span> n)</span> </span>&#123;</span><br><span class="line">    tree[ind].sum += x * n;</span><br><span class="line">    tree[ind].sum %= p;</span><br><span class="line">    tree[ind].t2 += x;</span><br><span class="line">    tree[ind].t2 %= p;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UP</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> ind)</span> </span>&#123;</span><br><span class="line">    tree[ind].sum = tree[ind &lt;&lt; <span class="number">1</span>].sum + tree[ind &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].sum;</span><br><span class="line">    tree[ind].sum %= p; </span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DOWN</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> ind, <span class="keyword">long</span> <span class="keyword">long</span> l, <span class="keyword">long</span> <span class="keyword">long</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (tree[ind].t1 - <span class="number">1</span> || tree[ind].t2) &#123;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> a = tree[ind].t1, b = tree[ind].t2;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        mul_tag(ind &lt;&lt; <span class="number">1</span>, a);</span><br><span class="line">        mul_tag(ind &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, a);</span><br><span class="line">        add_tag(ind &lt;&lt; <span class="number">1</span>, b, mid - l + <span class="number">1</span>);</span><br><span class="line">        add_tag(ind &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, b, r - mid);</span><br><span class="line">        tree[ind].t1 = <span class="number">1</span>;</span><br><span class="line">        tree[ind].t2 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> ind, <span class="keyword">long</span> <span class="keyword">long</span> l, <span class="keyword">long</span> <span class="keyword">long</span> r)</span> </span>&#123;</span><br><span class="line">    tree[ind].t1 = <span class="number">1</span>; tree[ind].t2 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">        tree[ind].sum = a[l];</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    build(ind &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">    build(ind &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">    UP(ind);</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> ind, <span class="keyword">long</span> <span class="keyword">long</span> flag, <span class="keyword">long</span> <span class="keyword">long</span> x, <span class="keyword">long</span> <span class="keyword">long</span> y, <span class="keyword">long</span> <span class="keyword">long</span> val, <span class="keyword">long</span> <span class="keyword">long</span> l, <span class="keyword">long</span> <span class="keyword">long</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt;= l &amp;&amp; r &lt;= y) &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="number">0</span>) &#123;</span><br><span class="line">            mul_tag(ind, val);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            add_tag(ind, val, r - l + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    DOWN(ind, l, r);</span><br><span class="line">    <span class="keyword">if</span> (x &lt;= mid) modify(ind &lt;&lt; <span class="number">1</span>, flag, x, y, val, l, mid);</span><br><span class="line">    <span class="keyword">if</span> (y &gt; mid) modify(ind &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, flag, x, y, val, mid + <span class="number">1</span>, r);</span><br><span class="line">    UP(ind);</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> ind, <span class="keyword">long</span> <span class="keyword">long</span> x, <span class="keyword">long</span> <span class="keyword">long</span> y, <span class="keyword">long</span> <span class="keyword">long</span> l, <span class="keyword">long</span> <span class="keyword">long</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt;= l &amp;&amp; r &lt;= y) &#123;</span><br><span class="line">        <span class="keyword">return</span> tree[ind].sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    DOWN(ind, l, r);</span><br><span class="line">    <span class="keyword">if</span> (x &lt;= mid) ans += query(ind &lt;&lt; <span class="number">1</span>, x, y, l, mid);</span><br><span class="line">    ans %= p;</span><br><span class="line">    <span class="keyword">if</span> (y &gt; mid) ans += query(ind &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, x, y, mid + <span class="number">1</span>, r);</span><br><span class="line">    ans %= p;</span><br><span class="line">    UP(ind);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; p;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">    build(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> op, x, y, k;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; op &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        <span class="keyword">switch</span> (op) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: </span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line">                <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">                modify(<span class="number">1</span>, op - <span class="number">1</span>, x, y, k, <span class="number">1</span>, n);</span><br><span class="line">            &#125; <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: &#123;</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; query(<span class="number">1</span>, x, y, <span class="number">1</span>, n) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            &#125; <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>










<h2 id="三、HZOJ-52-古老的打字机"><a href="#三、HZOJ-52-古老的打字机" class="headerlink" title="三、HZOJ-52-古老的打字机"></a>三、HZOJ-52-古老的打字机</h2><h3 id="1、40分程序改-BUG"><a href="#1、40分程序改-BUG" class="headerlink" title="1、40分程序改 BUG"></a>1、40分程序改 BUG</h3><ol>
<li>状态转移过程，采用了最朴素的状态转移方式，时间效率极差</li>
<li>没有采用斜率优化的转移技巧</li>
</ol>
<h3 id="2、40分程序改-BUG"><a href="#2、40分程序改-BUG" class="headerlink" title="2、40分程序改 BUG"></a>2、40分程序改 BUG</h3><ol>
<li>程序过程中需要求前缀和，值范围超过了整型表示范围，将 $int$ 改成 $long\ long$ 即可</li>
</ol>
<h1 id="13-习题答疑课-五"><a href="#13-习题答疑课-五" class="headerlink" title="13.习题答疑课(五)"></a>13.习题答疑课(五)</h1><h2 id="一、【0分】HZOJ-64-海贼红黑树"><a href="#一、【0分】HZOJ-64-海贼红黑树" class="headerlink" title="一、【0分】HZOJ-64-海贼红黑树"></a>一、【0分】HZOJ-64-海贼红黑树</h2><ol>
<li>做了错误的假设，假设第一个操作是插入节点的操作</li>
<li>删除了$__attribute__((constructor))$，导致 NIL节点没有被初始化</li>
<li>没有修改双黑节点的颜色，将双黑变成普通黑</li>
</ol>
<h2 id="二、剑指-Offer-56-数字出现的次数Ⅱ"><a href="#二、剑指-Offer-56-数字出现的次数Ⅱ" class="headerlink" title="二、剑指 Offer-56-数字出现的次数Ⅱ"></a>二、剑指 Offer-56-数字出现的次数Ⅱ</h2><ol>
<li>写出真值表，推导状态转化公式</li>
</ol>
<p><img src="../guanghu/Library/Application%2520Support/typora-user-images/image-20210131215620980.png" alt="image-20210131215620980"></p>
<p><strong>扩展问题：</strong>只有一个数字出现次数不足 4 次，其他数字，都出现了 4 次，找到这个数字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int singleNumber(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        int a &#x3D; 0, b &#x3D; 0, a1, b1;</span><br><span class="line">        for (int i &#x3D; 0, c; i &lt; nums.size(); i++) &#123;</span><br><span class="line">            c &#x3D; nums[i];</span><br><span class="line">            a1 &#x3D; (a &amp; ~b &amp; ~c) | (~a &amp; b &amp; c);</span><br><span class="line">            b1 &#x3D; (~a &amp; b &amp; ~c) | (~a &amp; ~b &amp; c);</span><br><span class="line">            a &#x3D; a1;</span><br><span class="line">            b &#x3D; b1;</span><br><span class="line">        &#125;</span><br><span class="line">        return b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="三、HZOJ-646-海贼王堆"><a href="#三、HZOJ-646-海贼王堆" class="headerlink" title="三、HZOJ-646-海贼王堆"></a>三、HZOJ-646-海贼王堆</h2><ol>
<li>堆的裸题</li>
<li>使用 set 模拟堆的行为</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">struct Data &#123;</span><br><span class="line">    string name;</span><br><span class="line">    int sex, age, ind;</span><br><span class="line">    bool operator&lt;(const Data &amp;a) const &#123;</span><br><span class="line">        if (name.find(&quot;wang&quot;) &#x3D;&#x3D; 0 &amp;&amp; a.name.find(&quot;wang&quot;) !&#x3D; 0) return true;</span><br><span class="line">        if (name.find(&quot;wang&quot;) !&#x3D; 0 &amp;&amp; a.name.find(&quot;wang&quot;) &#x3D;&#x3D; 0) return false;</span><br><span class="line">        if (sex - a.sex) return sex &#x3D;&#x3D; 0;</span><br><span class="line">        if (age - a.age) return age &gt; a.age;</span><br><span class="line">        if (name !&#x3D; a.name) return name &lt; a.name;</span><br><span class="line">        return ind &lt; a.ind;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    set&lt;Data&gt; s;</span><br><span class="line">    int n, op;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    for (int i &#x3D; 0; i &lt; n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        switch (op) &#123;</span><br><span class="line">            case 1: &#123;</span><br><span class="line">                string name;</span><br><span class="line">                int sex, age;</span><br><span class="line">                cin &gt;&gt; name &gt;&gt; sex &gt;&gt; age;</span><br><span class="line">                s.insert(&#123;name, sex, age, i&#125;);</span><br><span class="line">            &#125; break;</span><br><span class="line">            case 2: &#123;</span><br><span class="line">                if (s.size() &#x3D;&#x3D; 0) cout &lt;&lt; &quot;empty&quot; &lt;&lt; endl;</span><br><span class="line">                else cout &lt;&lt; s.begin()-&gt;name &lt;&lt; endl;</span><br><span class="line">            &#125; break;</span><br><span class="line">            case 3: &#123;</span><br><span class="line">                if (s.size() &#x3D;&#x3D; 0) break;</span><br><span class="line">                s.erase(s.begin());</span><br><span class="line">            &#125; break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="四、面试题反馈"><a href="#四、面试题反馈" class="headerlink" title="四、面试题反馈"></a>四、面试题反馈</h2><h3 id="字典树面试题1"><a href="#字典树面试题1" class="headerlink" title="字典树面试题1"></a>字典树面试题1</h3><p><strong>问题描述：</strong>例如一个用户输入了一个字符串：hellu，那它是不存在于字典中的，那么我们怎么判断出来呢？</p>
<p><strong>要求：</strong></p>
<p>（1）定义存储所有正确单词的数据结构。</p>
<p>（2）写一个录入单词的函数。</p>
<p>（3）写一个判断用户输入的单词是否正确的函数。</p>
<p><strong>注：</strong>忽略大小写，可以认为都是小写。</p>
<h3 id="字典树面试题2"><a href="#字典树面试题2" class="headerlink" title="字典树面试题2"></a>字典树面试题2</h3><p><strong>问题描述：</strong>出错的情况下，提示出正确的单词（可能有多个）。出错的情况很多，前中后的位置都有可能出错，可能错一个字母，也可能多一个或少一个字母。</p>
<p><strong>要求：</strong></p>
<p>（1）找出跟错误单词相差一个字母的正确单词即可。</p>
<p>（2）定义存储单词的数据结构。</p>
<p>（3）写出查询函数，返回n个正确的单词。</p>
<h1 id="00000000"><a href="#00000000" class="headerlink" title="00000000"></a>00000000</h1><h1 id="0000000000"><a href="#0000000000" class="headerlink" title="0000000000"></a>0000000000</h1> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://guziqiu.cn/2020/12/29/07.%E4%B9%A0%E9%A2%98%E7%AD%94%E7%96%91/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B9%A0%E9%A2%98%E7%AD%94%E7%96%91/" rel="tag">习题答疑</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2020/12/29/09.%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AF%95%E7%AE%97%E6%B3%95%E4%B8%8A/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            面试笔试算法上
          
        </div>
      </a>
    
    
      <a href="/2020/12/29/06.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">网络编程</div>
      </a>
    
  </nav>

  
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2021
        <i class="ri-heart-fill heart_icon"></i> guziqiu
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        由 <a href="https://hexo.io" target="_blank">Hexo</a> 强力驱动
        <span class="division">|</span>
        主题 - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.jpeg" alt="古子秋"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->


<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->


<script src="/js/clickBoom2.js"></script>


<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>